<div class="container-fluid p-0" style="height: calc(100vh - 55px);">
  <div class="row g-0 h-100">
    <!-- Sidebar -->
    <div class="col-md-4 col-lg-3 bg-white border-end d-md-block collapse" id="sidebar">
      <!-- Header del sidebar -->
      <div class="d-flex align-items-center justify-content-between p-3 border-bottom bg-secondary">
        <div class="d-flex align-items-center">
          <img src="https://placehold.co/40" alt="Mi perfil" class="rounded-circle me-3">
          <h6 class="mb-0">Historial</h6>
          <br/>
        </div>
      </div>
      <!-- Lista de contactos/conversaciones -->
      <div class="overflow-auto" style="height: calc(100vh - 140px);">
        <div class="list-group list-group-flush">
          <% @phones.each do |phone| %>
            <%= link_to chat_path(phone), 
                data: { turbo_frame: "chat_content" },
                class: "list-group-item list-group-item-action #{'bg-primary-subtle' if phone == @chat_session_id} border-0 p-3" do %>
              <div class="d-flex align-items-center">
                <img src="https://placehold.co/50" alt="Contacto" class="rounded-circle me-3">
                <div class="flex-grow-1">
                  <div class="d-flex justify-content-between align-items-start">
                    <h6 class="mb-1"><%= phone %></h6>
                    <!-- <small class="text-muted">10:30</small> -->
                  </div>
                  <!-- <p class="mb-0 text-muted small">
                    Hola, ¿cómo estás?
                  </p> -->
                </div>
                <!-- <span class="badge bg-success rounded-pill">2</span> -->
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Área principal del chat -->
    <div class="col-md-8 col-lg-9 d-flex flex-column h-100">
      <%= turbo_frame_tag "chat_content", class: "d-flex flex-column h-100" do %>
        <%= render "chat_content" %>
      <% end %>
    </div>
  </div>
</div>